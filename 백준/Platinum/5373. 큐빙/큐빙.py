import sys
input=sys.stdin.readline


'''
          27 28 29
          30 31 32 뒤
          33 34 35
    
36 37 38   0  1  2  45 46 47   9 10 11
39 40 41   3  4  5  48 49 50  12 13 14
42 43 44   6  7  8  51 52 53  15 16 17
   왼        위        오       아래
          18 19 20
          21 22 23 앞
          24 25 26

'''

def turn_cube(cube,move):
    if move == 'U':
        idx1 = [ 0, 1, 2, 3, 4, 5, 6, 7, 8,18,19,20,33,34,35,38,41,44,45,48,51]
        idx2 = [ 2, 5, 8, 1, 4, 7, 0, 3, 6,38,41,44,45,48,51,35,34,33,20,19,18]

    elif move == 'D':
        idx1 = [ 9,10,11,12,13,14,15,16,17,47,50,53,24,25,26,36,39,42,27,28,29]
        idx2 = [11,14,17,10,13,16, 9,12,15,27,28,29,53,50,47,24,25,26,42,39,36]

    elif move == 'F':
        idx1 = [18,19,20,21,22,23,24,25,26, 6, 7, 8,51,52,53,15,16,17,42,43,44]
        idx2 = [20,23,26,19,22,25,18,21,24,51,52,53,15,16,17,42,43,44, 6, 7, 8]

    elif move == 'B':
        idx1 = [27,28,29,30,31,32,33,34,35, 0, 1, 2,45,46,47, 9,10,11,36,37,38]
        idx2 = [29,32,35,28,31,34,27,30,33,36,37,38, 0, 1, 2,45,46,47, 9,10,11]

    elif move == 'L':
        idx1 = [36,37,38,39,40,41,42,43,44, 0, 3, 6,18,21,24,11,14,17,27,30,33]
        idx2 = [38,41,44,37,40,43,36,39,42,18,21,24,17,14,11,33,30,27, 0, 3, 6]

    elif move == 'R':
        idx1 = [45,46,47,48,49,50,51,52,53, 2, 5, 8,20,23,26, 9,12,15,29,32,35]
        idx2 = [47,50,53,46,49,52,45,48,51,29,32,35, 2, 5, 8,26,23,20,15,12, 9]

    tmp = [cube[i] for i in idx1]
    for i in range(len(idx2)):
        cube[idx2[i]] = tmp[i]
    return

for _ in range(int(input())):
    n = int(input())
    turn = list(input().split())
    # 위 아래 앞 뒤 왼 오
    cube = ['w']*9+['y']*9+['r']*9+['o']*9+['g']*9+['b']*9
    for move in turn:
        if move[1] == '-':
            turn_cube(cube,move[0])
            turn_cube(cube,move[0])
            turn_cube(cube,move[0])
        elif move[1] == '+':
            turn_cube(cube,move[0])
    print(*cube[0:3],sep='',end='\n')
    print(*cube[3:6],sep='',end='\n')
    print(*cube[6:9],sep='',end='\n')